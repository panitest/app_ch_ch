<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <title>Chiclets</title>
    <link rel="stylesheet"  href="chiclets.css" type="text/css" charset="utf-8" />
    <link href='http://fonts.googleapis.com/css?family=Raleway:600' rel='stylesheet' type='text/css'>
   <link rel="stylesheet" href="estilo_320.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="estilo_481.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="estilo_641.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="animate-custom.css" type="text/css" charset="utf-8" />
    <style>
	label{ display:block}
	.fileContainer {
		overflow: hidden;
		position: relative;
	}
	.fileContainer [type=file] {
		cursor: inherit;
		display: block;
		font-size: 999px;
		filter: alpha(opacity=0);
		min-height: 100%;
		min-width: 100%;
		opacity: 0;
		position: absolute;
		right: 0;
		text-align: right;
		top: 0;
	}
	.fileContainer [type=file] {
		cursor: pointer;
	}
	.cajaalert{
		background-color:#FFF; 
		-webkit-box-shadow: inset 0px 0px 15px #cacaca;
		-moz-box-shadow: inset 0px 0px 15px #cacaca;
		box-shadow: inset 0px 0px 15px #cacaca;
		border:1px solid #D8D8D7;
		-webkit-border-radius: 4px;
		-moz-border-radius: 4px;
		border-radius: 4px;
		font-family:Arial, Helvetica, sans-serif; font-size:12px; color:#000;
	}
	#loadfotoav{ position:absolute; left:50%; margin-left:-60px; top:50%; margin-top:-60px; z-index:5000; display:none}
	#mge{ font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#EE3A43; text-align:center; width:120px; height:20px; z-index:6000; position:absolute; left:50%; margin-left:-60px; top:50%;margin-top:90px; display:none;text-shadow: 1px 1px 9px rgba(255, 242, 0, 1); font-weight:bold;}

.controlador{ background:none}
input[type=range] {
  -webkit-appearance: none;
  margin: 10px 0;
  width: 100%;
}
input[type=range]:focus {
  outline: none;
}
input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: 12.8px;
  cursor: pointer;
  animate: 0.2s;
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  background: #E33740;
  border-radius: 25px;
  border: 0px solid #000101;
}
input[type=range]::-webkit-slider-thumb {
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  border: 0px solid #000000;
  height: 20px;
  width: 39px;
  border-radius: 7px;
  background: #000;
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: -3.6px;
}
input[type=range]:focus::-webkit-slider-runnable-track {
  background: #E33740;
}
input[type=range]::-moz-range-track {
  width: 100%;
  height: 12.8px;
  cursor: pointer;
  animate: 0.2s;
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  background: #E33740;
  border-radius: 25px;
  border: 0px solid #000101;
}
input[type=range]::-moz-range-thumb {
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  border: 0px solid #000000;
  height: 20px;
  width: 39px;
  border-radius: 7px;
  background: #000;
  cursor: pointer;
}
input[type=range]::-ms-track {
  width: 100%;
  height: 12.8px;
  cursor: pointer;
  animate: 0.2s;
  background: transparent;
  border-color: transparent;
  border-width: 39px 0;
  color: transparent;
}
input[type=range]::-ms-fill-lower {
  background: #E33740;
  border: 0px solid #000101;
  border-radius: 50px;
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
}
input[type=range]::-ms-fill-upper {
  background: #E33740;
  border: 0px solid #000101;
  border-radius: 50px;
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
}
input[type=range]::-ms-thumb {
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  border: 0px solid #000000;
  height: 20px;
  width: 39px;
  border-radius: 7px;
  background: #000;
  cursor: pointer;
}
input[type=range]:focus::-ms-fill-lower {
  background: #E33740;
}
input[type=range]:focus::-ms-fill-upper {
  background: #E33740;
}
#tempCanvas{ position:absolute; top:-1500px}
#val{ position:absolute; top:-5px; font-size:10px}
#sonda,#tempCanvas,#im{ position:absolute;top:-1500px;}
#bigCanvas,#bigTempCanvas{position:absolute;top:-1500px;}
#blocklandscape{ background:#FFF200; position:absolute; width:100%; height:100%; display:none; z-index:9999; text-align:center;  font-family:Arial, Helvetica, sans-serif; font-size:16px; color:#000;}
#blocklandscape span{ position: relative;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);}
.inAppBrowserWrap {
  background-color: rgba(0,0,0,0.75);
  color: rgba(235,235,235,1.0);
}
.inAppBrowserWrap menu {
  overflow: auto;
  list-style-type: none;
  padding-left: 0;
}
.inAppBrowserWrap menu li {
  font-size: 25px;
  height: 25px;
  float: left;
  margin: 0 10px;
  padding: 3px 10px;
  text-decoration: none;
  color: #ccc;
  display: block;
  background: rgba(30,30,30,0.50);
}
.inAppBrowserWrap menu li.disabled {
    color: #777;
}
#verbtns{ display:none}
#cajaselfies{ width:0; position:absolute; right:0;  z-index:9000;
background:#FFF200; top:-3000px; margin-top:0; padding-top:0; top:0;
	-webkit-box-shadow: -7px 0px 13px 0px rgba(0, 0, 0, 0.39);
-moz-box-shadow:    -7px 0px 13px 0px rgba(0, 0, 0, 0.39);
box-shadow:         -7px 0px 13px 0px rgba(0, 0, 0, 0.39);
padding-bottom:50px; overflow:hidden;
-webkit-transition: all .3s ease-in-out;
    -moz-transition: all .3s ease-in-out;
    -o-transition: all .3s ease-in-out;
    -ms-transition: all .3s ease-in-out;
    transition: all .3s ease-in-out;
	height:auto !important;

}
#contenedorflecha{position:relative;z-index:10000; top:0; margin-top:0; padding-top:0}
#flechafotostodas{ position:fixed; right:0; left:auto !important; top:10%; -webkit-backface-visibility: hidden;}
#zactflecha{ position:fixed; right:0; left:auto !important; top:10%; -webkit-backface-visibility: hidden; z-index:100}
#contentapp{ position:relative; top:10%; width:100%; left:0;}
.delete{ position:absolute; left:50%; margin-left:-40px; bottom:0;}
.down{position:absolute; left:50%; margin-left:16px; bottom:0;}
#marcagua{ opacity:0; bottom:0; right:0; position:absolute}
#btvolver{ background:url(images/flechita_atras.png) center center no-repeat; background-size:100%; width:50px; height:47px; position:absolute; top:-50px; left:0; z-index:3000;}
#lasbases{ display:none; font-family:Arial, Helvetica, sans-serif; font-size:12px}
</style>
    <script type="text/javascript" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/shake.js"></script>
    <script type="text/javascript" src="js/panino.js"></script>
	<script type="text/javascript" src="js/comunes.js"></script>
    <script type="text/javascript" src="js/paninoAJAX.js"></script>
	<script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/transicion.js"></script>

    <script type="text/javascript" charset="utf-8">
	function testConexion(){
		var im=new Image();
		im.onload=function(){};
		im.onerror=function(){
			$('offline').style.left=$('offline').style.top=0;
			$('offline').style.backgroundSize='100%';
			$('contentapp').innerHTML='';
		};
		im.src='http://servidordeapps.com/images/ajax-loader.gif?'+(+new Date());
	}
	function fixCanvasAndroid4() {
		var els=document.getElementsByName('canvas'),i=0,l=els.length,offsetTrail;
		for(;i<l;i++){
			offsetTrail = els[i];
			while (offsetTrail && offsetTrail.nodeName!=document.documentElement) {
				offsetTrail = offsetTrail.offsetParent;
				offsetTrail.style.overflow='visible';
				offsetTrail.style.opacity='0.0';
				setTimeout(function(){offsetTrail.style.opacity='1';},15);
			}
		}
	}

	ns.imagen=0;
	ns.data;
	function dataURItoBlob(dataURI) {
		// convert base64/URLEncoded data component to raw binary data held in a string
		var byteString;
		if (dataURI.split(',')[0].indexOf('base64') >= 0)
			byteString = atob(dataURI.split(',')[1]);
		else
			byteString = unescape(dataURI.split(',')[1]);
	
		// separate out the mime component
		var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
	
		// write the bytes of the string to a typed array
		var ia = new Uint8Array(byteString.length);
		for (var i = 0; i < byteString.length; i++) {
			ia[i] = byteString.charCodeAt(i);
		}
	
		return new Blob([ia], {type:mimeString});
	}
	function cropJS(im,maxWidth,maxHeight,callback){
		var i=new Image();
		var canvas=$('sonda'),ctx=canvas.getContext('2d');
		canvas.width=maxWidth;
		canvas.height=maxHeight;
		i.onload=function(){
			var w=this.width,
			h=this.height,
			lado=Math.min(w,h),
			sy=(h-maxHeight)/2;
			sx=(w-maxWidth)/2;
			if(h==lado)sy=0;
			if(w==lado)sx=0;
			ctx.drawImage(i,sx,sy,lado,lado,0,0,maxWidth,maxHeight);
			var canvasData = canvas.toDataURL();
			
			if (canvasData === 'data:,' || canvasData.length < 10) {//para Android<4
				var offsetdata=getOffset(canvas);
				var offset = {
					left: offsetdata.left,
					top: offsetdata.top,
					width: canvas.width,
					height: canvas.height
				};
				window.canvasplugin(canvas, offset, 'image/png', function(val) {
					canvasData = val.data;
				});
			}
			ns.imagen= canvasData;
			//alert(canvasData.substr(0,30));
			/*
			if(typeof callback=='function'){
				callback();
			}*/
			getPage('2-3.html');
		}
		i.src=im;
		
	}
	/*
	falla en phonegap
	function cropSever(im,maxWidth,maxHeight,callback){
		$('loadfotoav').style.display='block';
		var file=im;
		var formData = new FormData();
		formData.append('proceso', 'crop');
		formData.append('foto', file);
		var xhr = new XMLHttpRequest();
		xhr.open('POST', 'http://applicationslive.com/chch/proceso2.php?'+(+new Date()), true);
		xhr.onload = function () {
		  if (xhr.status === 200) {
			ns.data=this.responseText;
			if(typeof callback=='function'){
				$('loadfotoav').style.display='none';
				cropJS(ns.data,640,640,callback);
			}
		  } else {
			alert('Por favor intentalo nuevamente');
		  }
		};
		xhr.send(formData);
	}*/
	function win(r){
		$('loadfotoav').style.display='none';
		$('mge').style.display='none';
		if(r.response.indexOf('.jpg')==-1){
			alert(r.response);
			return;
		}
		
		cropJS(r.response,640,640,ns.callback);
	}
	function fail(r){
		$('loadfotoav').style.display='none';
		$('mge').style.display='none';
		alert('La imagen no pudo subirse');
	}
	function cropSever(imageURI,maxWidth,maxHeight,callback) {
			$('loadfotoav').style.display='block';
			$('mge').style.display='block';
            var options = new FileUploadOptions();
            options.fileKey="foto";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";
 
            var params = new Object();
            params.proceso = "crop";
          
            options.params = params;
            options.chunkedMode = false;
 
            var ft = new FileTransfer();
			ns.callback=callback;
            ft.upload(imageURI, encodeURI('http://servidordeapps.com/proceso2.php?'+(+new Date())), win, fail, options);
     }
	 /*
	 no sirve para phonegap
	function getFile(e){
			var input=e.target,fr=new FileReader();
			
			if(input.files.length===0)return;
			fr.onload=function(evt){
				var im=evt.target.result;
				ns.imagen=evt.target.result;
				var img=new Image();
				img.onload=function(){
					if(this.width<640 || this.height<640){
						alert('La imagen seleccionada es muy pequeña');
						return;
					}else{
						//cropSever(input.files[0],640,640,function(){getPage('3.html',paso3);});
						cropSever(input.value,640,640,function(){getPage('3.html',paso3);});
					}
				}
				img.src=ns.imagen;
				
			}
			fr.readAsDataURL(input.files[0]);
	}
	*/
	var pictureSource;   
    var destinationType; 
	
	document.addEventListener("deviceready",onDeviceReady,false);
	var HEIGHT;
	var WIDTH;
	var gaPlugin;
	function onDeviceReady() 
	{
		pictureSource=navigator.camera.PictureSourceType;
		destinationType=navigator.camera.DestinationType;
		ns.so=(device.platform);
		ns.user=device.uuid;
		ns.bgs=[];
		var i=1,l=122;
		for(;i<l;i++){
			ns.bgs.push('background'+i+'.jpg');
		}
		
		Instagram.isInstalled(function (err, installed) {
			if (installed) {
				ns.instagramInstalado=1; // installed app version on Android
			} else {
				ns.instagramInstalado=0;
			}
		});
		 paso8();
		

		HEIGHT=window.innerHeight;
		WIDTH=window.innerWidth;
		testConexion();
		gaPlugin = window.plugins.gaPlugin;
    	gaPlugin.init(function(){/*success*/}, function(){/*error*/}, "UA-65806913-3", 10);
		
	}
	
	
	
	function getPhoto(source) 
	{
		navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
		destinationType: destinationType.FILE_URI,
		sourceType: source });
	}
	
	function onFail(message) 
	{
		//alert('Failed because: ' + message);
	}
	
	function onPhotoURISuccess(imageURI) 
	{
		cropSever(imageURI,640,640,function(){getPage('3.html',paso3);});
	}
	
	
	function capturePhotoWithFile() {
        navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, destinationType: Camera.DestinationType.FILE_URI,correctOrientation: true });
    }
	function getPage(p,callback){
		requestGET(
			p,
			function(r){
				switch(p){
					case '2.html':
					ns.paso=2;
					break;
					case '3.html':
					ns.paso=3;
					break;
					case '4.html':
					ns.paso=4;
					break;
					case '5.html':
					ns.paso=5;
					break;
				}
				$('contentapp').innerHTML=r;
				 fixCanvasAndroid4();
				  if(ns.paso==4 && $('sacudir')){
					 //$('sacudir').style.top=(-HEIGHT/10)+'px';
					 //$('sacudir').style.height=HEIGHT+'px';
					// $('sacudir').style.width=WIDTH+'px';
					 $('sacudir').style.left=$('sacudir').style.top=0;
					 $('sacudir').style.background='url(images/chickets_sacudir_conshake.jpg) center center no-repeat';
					 $('sacudir').style.backgroundSize='100%';
					 setTimeout(
						function(){if($('sacudir')){$('sacudir').style.background='url(images/chickets_sacudir_conchicle.jpg) center center no-repeat';$('sacudir').style.backgroundSize='100%';}},1500		
					);
				 }
				 if(ns.paso!=4 && $('sacudir')){
					   $('sacudir').style.left=$('sacudir').style.top='-1500px';
				  }
				if(typeof callback=='function'){
					callback();
				}
			},
			{}
		);
		testConexion();
	}
	function saveCanvas(){
		var canvasData = $("bigCanvas").toDataURL();
			if (canvasData === 'data:,' || canvasData.length < 10) {//para Android<4
				var offsetdata=getOffset($("bigCanvas"));
				var offset = {
					left: offsetdata.left,
					top: offsetdata.top,
					width: $("bigCanvas").width,
					height: $("bigCanvas").height
				};
				window.canvasplugin($("bigCanvas"), offset, 'image/png', function(val) {
					canvasData = val.data;
				});
			}
			ns.nombrerandom=+(new Date())+'__'+getRandomInt(0, 9999);
			ns.imagen= canvasData;
			ns.finalWidth= $("bigCanvas").width;
			ns.finalHeight= $("bigCanvas").height;
	}
	
	function getRandomInt(min, max) {
    	return Math.floor(Math.random() * (max - min + 1)) + min;
	}
	function selectBg(){
		$('marcagua').style.opacity=0;
		var selectedBg='http://servidordeapps.com/bg/'+ns.bgs[getRandomInt(0,120)];
		var marca=new Image();
		marca.onload=function(){
			var escala=$('fotogrande2inner').offsetWidth/500;
			$('marcagua').style.width=(this.width*escala)+'px';
			$('marcagua').style.height=(this.height*escala)+'px';
			$('marcagua').style.opacity=1;
		}
		marca.src='images/marca.png';
		generateFusion(selectedBg);
		$('fotogrande2').style.background='url('+selectedBg+') center center no-repeat';
		$('fotogrande2').style.backgroundSize='100%';
		/*var blob = dataURItoBlob(ns.imagen);
		var urlCreator = window.URL || window.webkitURL;
		var imageUrl = urlCreator.createObjectURL( blob );*/
		$('fotogrande2inner').style.background='url('+ns.imagen+') center center no-repeat';
		$('fotogrande2inner').style.backgroundSize='100%';
	}
	function saveselfie(canvasData){
		var data={'proceso':'saveselfie','src':canvasData,'nombrerandom':ns.nombrerandom,'user':ns.user}
		request(
				'http://servidordeapps.com/proceso2.php',
				function(r){
					 paso8();
					$('loadfotoav').style.display='none';
					$('mge').style.display='none';
					$('verbtns').style.display='block';
					ns.finale='http://servidordeapps.com/finales/'+r;
					ns.finaleData=canvasData;
				},
				data
		);
	}
	function getQueryVariable(variable,url)
	{
		   var query = url.split('?').pop();
		   var vars = query.split("&");
		   for (var i=0;i<vars.length;i++) {
				   var pair = vars[i].split("=");
				   if(pair[0] == variable){return pair[1];}
		   }
		   return(false);
	}
	function paso8(){
		request(
			'http://servidordeapps.com/proceso2.php',
			function(r){
				$('contenedorselfies').innerHTML=r;
			},
			{
				'proceso':'getmisselfies',
				'user':ns.user
			}
		);
		
	}
	function enviar(){
		if($('nombre').value.length<1){
			alert('Por favor complete el campo nombre');
			return;
		}
		if($('email').value.length<1){
			alert('Por favor complete el campo e-mail');
			return;
		}
		if($('email').value.indexOf('@')==-1 || $('email').value.indexOf('.')==-1){
			alert('Por favor revise el e-mail ingresado');
			return;
		}
		if($('telefono').value.length<1){
			alert('Por favor complete el campo teléfono');
			return;
		}
		if(!$('acepto').checked){
			alert('Debe aceptar los términos y condiciones');
			return;
		}
		request(
						'http://servidordeapps.com/proceso2.php',
						function(r){
							getPage('7.html');
						},
						{
							'proceso':'save_data_contacto',
							'nombre':$('nombre').value,
							'email':$('email').value,
							'telefono':$('telefono').value,
							'user':ns.user
						}
				);
	}
	function compartirFacebook(){
		var loop;
		var ref=window.open('https://www.facebook.com/dialog/feed?app_id=1594877000767526&link='+encodeURIComponent('http://servidordeapps.com/')+'&display=popup&redirect_uri='+encodeURIComponent('http://servidordeapps.com/close3.php')+'&picture='+encodeURIComponent(ns.finale.split('/finales/').join('/facebook/'))+'&description='+encodeURIComponent('Divertite con tus amigos y ganá uno de los 10 selfie sticks')+'&caption='+encodeURIComponent('Selfie Chiclets'), '_blank', 'location=yes' );
		
		ref.addEventListener( "loadstop", function(event) {
			if (event.url.indexOf("post_id")!=-1 && event.url.indexOf("picture")==-1 ) {
				/*var postid=getQueryVariable('post_id',event.url).split('#')[0];*/
        		ref.close();
				request(
						'http://servidordeapps.com/proceso2.php',
						function(r){
							var rta=r.trim();
							if(rta=='registrar'){
								getPage('6.html');
							}else{
								getPage('7.html');
							}
							
						},
						{
							'proceso':'facebook_ok',
							'foto':ns.finale.split('/').pop(),
							'user':ns.user
						}
				);
				return;
    		}else if ( event.url.indexOf("picture")==-1) {
        		ref.close();
				return;
			}
		});
		
		
		
	}
	function compartirTwitter(){
		var ref=window.open('http://servidordeapps.com/tw/redirect.php?f='+ns.finale.split('/').pop()+'&rnd='+(+new Date()), '_blank', 'location=yes');
		ref.addEventListener( "loadstop", function(event) {
				if (event.url.indexOf("error.php")!=-1  ) {
					ref.close();
					return;
				}
				
				if (event.url.indexOf("index.php")!=-1  ) {
					ref.close();
					request(
						'http://servidordeapps.com/proceso2.php',
						function(r){
							var rta=r.trim();
							if(rta=='registrar'){
								getPage('6.html');
							}else{
								getPage('7.html');
							}
							
						},
						{
							'proceso':'twitter_ok',
							'foto':ns.finale.split('/').pop(),
							'user':ns.user
						}
					);
					return;
				}
												   
		});
	}
	function compartirInstagram(){
		if(!ns.instagramInstalado){
			alert('Instagram no está disponible en el dispositivo.');
			return;
		}
		Instagram.share(ns.finaleData, 'Divertite con tus amigos y gana uno de los 10 selfie sticks', function (err) {
			if (err) {
				alert("La imagen no pudo compartirse");
				return;
			}
		});
		request(
						'http://servidordeapps.com/proceso2.php',
						function(r){
							var rta=r.trim();
							if(rta=='registrar'){
								getPage('6.html');
							}else{
								getPage('7.html');
							}
							
						},
						{
							'proceso':'instagram_ok',
							'foto':ns.finale.split('/').pop(),
							'user':ns.user
						}
		);
	}
	function generateFusion(bg){
		$('loadfotoav').style.display='block';
		$('mge').style.display='block';
		document.getElementById('tempCanvas').width=500;
		document.getElementById('tempCanvas').height=500;
		tempCanvas=document.getElementById('tempCanvas');
		tempCtx = tempCanvas.getContext("2d");
		var fondo=new Image();
		fondo.onload=function(){
			tempCtx.drawImage(this, 0, 0,ns.finalWidth,ns.finalHeight,0,0,document.getElementById('tempCanvas').width,document.getElementById('tempCanvas').width);
			var recorte=new Image();
			recorte.onload=function(){
				tempCtx.drawImage(this, 0, 0,ns.finalWidth,ns.finalHeight,0,0,document.getElementById('tempCanvas').width,document.getElementById('tempCanvas').width);
				
				var marca=new Image();
				marca.onload=function(){
					tempCtx.drawImage(this, 347,383);
					var canvasData = tempCanvas.toDataURL();
					if (canvasData === 'data:,' || canvasData.length < 10) {//para Android<4
						var offsetdata=getOffset(tempCanvas);
						var offset = {
							left: offsetdata.left,
							top: offsetdata.top,
							width: tempCanvas.width,
							height: tempCanvas.height
						};
						window.canvasplugin(tempCanvas, offset, 'image/png', function(val) {
							canvasData = val.data;
						});
					}
					saveselfie(canvasData);
				}
				marca.src='images/marca.png';
				
				
			};
			recorte.src=ns.imagen;
		};
		fondo.src=bg;
		
	}
	function paso5(){
		ns.reproduciendo=0;
		selectBg();
	}
	//ns.loop=1;
	ns.reproduciendo=0;
	function playAudio(url,loop) {
		if(ns.reproduciendo){return;}
		ns.reproduciendo=1;
		var uri;
		var my_media;
		var l=loop?function(s){if (s === Media.MEDIA_STOPPED /*&& ns.loop*/){my_media.play();}}:null;
		if(ns.so=='Android'){
			uri='/android_asset/www/'+url;
		}else{
			uri=url;
		}
		my_media = new Media(uri,
				// success callback
				 function () {/*ns.reproduciendo=1;*/ getPage('5.html',paso5);my_media.release();},
				// error callback
				 function (err) { /*alert("playAudio():Audio Error: " + err.code);*/ },l
		);
			   // Play audio
		my_media.play();
	}
	function chch(){
		if(ns.paso!=4){return;}
		if($('sacudir'))
			$('sacudir').className='animated shake';
		
		//if(!ns.reproduciendo){
		playAudio('sound/chch.mp3');
		//}
		//setTimeout(function(){ns.loop=0;getPage('5.html',paso5);/*ns.reproduciendo=0;*/},1000);
	}
	function eliminarNoNegro(){
		var imageData = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height);
		var data = imageData.data;
		for (var i = 0, n = data.length; i < n; i += 4) {
		   if(data[i]==0 && data[i+1]==0 && data[i+2]==0){
			data[i + 3] = 0;
		   }else{
			data[i + 3] = 255;   
			}
		}
		tempCtx.putImageData(imageData, 0, 0);
	}
	function eliminarNoNegroBig(){
		var imageData = ctxBigTempCanvas.getImageData(0, 0, 500,500);
		var data = imageData.data;
		for (var i = 0, n = data.length; i < n; i += 4) {
		   if(data[i]==0 && data[i+1]==0 && data[i+2]==0){
			data[i + 3] = 0;
		   }else{
			data[i + 3] = 255;   
			}
		}
		ctxBigTempCanvas.putImageData(imageData, 0, 0);
	}
	function testColores(ctx,w){
		var opts={ skip: 5, exclude: '0,0,0'};
		var image_data   = ctx.getImageData(0, 0, w, 2),
         pixel_length = image_data.data.length,
          data         = image_data.data;
		   var colors = {}, 
          primary_color = { 
            rgb: '',
            count: 0
          };
		  
		  for ( var px = 0; px < pixel_length; px = px + opts.skip * 4 ) {
        		var rgb =data[px]+','+data[px+1]+','+data[px+2];
				
				if(rgb!=opts.exclude){
					 if ( rgb in colors ) {
							colors[rgb]++;
					  } else {
							colors[rgb] = 1;
					  }
				
					var count = colors[rgb];
					if ( count > primary_color.count ) {
					  primary_color.rgb = rgb;
					  primary_color.count = count;
					}
				}
		  }
		  return  primary_color.rgb.split(',');
		
	}
	function removeBackground(img, canvas,tolerance) {
		var context = canvas.getContext('2d');
		ctx = context;
		context.drawImage(img, 0, 0,640,640,0,0,document.getElementById('tempCanvas').width,document.getElementById('tempCanvas').width);
		ns.testColor=testColores(context,document.getElementById('tempCanvas').width);
		var imageData = context.getImageData(0, 0, canvas.width, canvas.height);
		var data = imageData.data;
		
		for (var i = 0, n = data.length; i < n; i += 4) {
			var diff = Math.abs(data[i] -ns.testColor[0]) + Math.abs(data[i + 1] - ns.testColor[1]) + Math.abs(data[i + 2] - ns.testColor[2]);
			data[i + 3] = (diff * diff) / tolerance;
		}
		context.putImageData(imageData, 0, 0);
	}
	function removeBackgroundBig(img, canvas,tolerance) {
		var context = canvas.getContext('2d');
		//ctx = context;
		context.drawImage(img, 0, 0,640,640,0,0,500,500);
		var imageData = context.getImageData(0, 0, canvas.width, canvas.height);
		var data = imageData.data;
		
		for (var i = 0, n = data.length; i < n; i += 4) {
			var diff = Math.abs(data[i] -ns.testColor[0]) + Math.abs(data[i + 1] - ns.testColor[1]) + Math.abs(data[i + 2] - ns.testColor[2]);
			data[i + 3] = (diff * diff) / tolerance;
		}
		context.putImageData(imageData, 0, 0);
	}
	
	function handleMouseDown(e) {
		e.preventDefault();
		e.stopPropagation();
		tempCtx.clearRect(0, 0, tempCanvas.width, tempCanvas.height);
		isDown = true;
	}

	function handleMouseUp(e) {
		e.preventDefault();
		e.stopPropagation();
		isDown = false;
		tempCtx.save();
		tempCtx.globalCompositeOperation = "source-in";
		tempCtx.drawImage($('im'), 0, 0,640,640,0,0,document.getElementById('tempCanvas').width,document.getElementById('tempCanvas').width);
		tempCtx.restore();
		eliminarNoNegro();
		ctx.drawImage(tempCanvas, 0, 0);
	}

	function handleMouseOut(e) {
		e.preventDefault();
		e.stopPropagation();
		isDown = false;
	}

	function handleMouseMove(e) {
		if (!isDown) {
			return;
		}
		e.preventDefault();
		e.stopPropagation();
		mouseX = parseInt( (e.offsetX || e.layerX || 0) );
		mouseY = parseInt( (e.offsetY || e.layerY || 0) );
		ctx.beginPath();
		ctx.arc(mouseX, mouseY, 15, 0, PI2);
		ctx.closePath();
		ctx.fill();
		tempCtx.beginPath();
		tempCtx.arc(mouseX, mouseY, 15, 0, PI2);
		tempCtx.closePath();
		tempCtx.fill();
	}
	function handleTouchMove(e) {
		if (!isDown) {
			return;
		}
		e.preventDefault();
		e.stopPropagation();
		var touch = e.targetTouches[0];
		mouseX = (touch.pageX-offsetX) || 0;
		mouseY = (touch.pageY-offsetY) || 0;
		if(mouseX<0 || mouseX>document.getElementById('tempCanvas').width){
			return;
		}
		if(mouseY<0 || mouseY>document.getElementById('tempCanvas').height){
			return;
		}
		ctx.beginPath();
		ctx.arc(mouseX, mouseY, 15, 0, PI2);
		ctx.closePath();
		ctx.fill();
		tempCtx.beginPath();
		tempCtx.arc(mouseX, mouseY, 15, 0, PI2);
		tempCtx.closePath();
		tempCtx.fill();
		
		var trazo=(500*15)/document.getElementById('tempCanvas').width;
		var t_mouseX=(500*mouseX)/document.getElementById('tempCanvas').width;
		var t_mouseY=(500*mouseY)/document.getElementById('tempCanvas').width;
		ctxBigCanvas.beginPath();
		ctxBigCanvas.arc(t_mouseX, t_mouseY, trazo, 0, PI2);
		ctxBigCanvas.closePath();
		ctxBigCanvas.fill();
		
		ctxBigTempCanvas.beginPath();
		ctxBigTempCanvas.arc(t_mouseX, t_mouseY, trazo, 0, PI2);
		ctxBigTempCanvas.closePath();
		ctxBigTempCanvas.fill();
		
		
		
		
	}
	function handleTouchStart(e) {
		panino.getO(document.body).scrollTop=0;
		panino.getO(document.body).scrollLeft=0;
		//var pos=getOffset($('canvas'));
		var pos=$('canvas').getBoundingClientRect();
		offsetX=pos.left;
		offsetY=pos.top;
		e.preventDefault();
		e.stopPropagation();
		tempCtx.clearRect(0, 0, tempCanvas.width, tempCanvas.height);
		ctxBigTempCanvas.clearRect(0, 0, 500, 500);
		isDown = true;
	}
	function handleTouchEnd(e) {
		e.preventDefault();
		e.stopPropagation();
		isDown = false;
		
		tempCtx.save();
		tempCtx.globalCompositeOperation = "source-in";
		tempCtx.drawImage($('im'), 0, 0,640,640,0,0,document.getElementById('tempCanvas').width,document.getElementById('tempCanvas').width);
		tempCtx.restore();
		eliminarNoNegro();
		ctx.drawImage(tempCanvas, 0, 0);
		
		ctxBigTempCanvas.save();
		ctxBigTempCanvas.globalCompositeOperation = "source-in";
		ctxBigTempCanvas.drawImage($('im'), 0, 0,640,640,0,0,500,500);
		ctxBigTempCanvas.restore();
		eliminarNoNegroBig();
		ctxBigCanvas.drawImage(bigTempCanvas, 0, 0);
		
	}
	var offsetX;
	var offsetY;
	var tempCanvas,tempCtx;
	var isDown = false;
	var PI2 = Math.PI * 2;
	var ctx;
	function getOffset(obj) {
      var offsetLeft = 0;
	  var offsetTop = 0;
		do {
		  if (!isNaN(obj.offsetLeft)) {
			  offsetLeft += obj.offsetLeft;
		  }
		  if (!isNaN(obj.offsetTop)) {
			  offsetTop += obj.offsetTop;
		  }   
		} while(obj = obj.offsetParent );
		return {left: offsetLeft, top: offsetTop};
	}
	var bigCanvas,ctxBigCanvas,bigTempCanvas,ctxBigTempCanvas;
	function paso3(){
		var imen3=new Image();
		imen3.onload=function(){
			var himen3=this.height;
			$('en3').style.top=-(himen3/4)+'px';
		}
		imen3.src='images/ajusta-tu-imagen.png';
		$('im').onload=function(){
			document.getElementById('tempCanvas').width=document.getElementById('canvas').width=document.getElementById('fotogrande2').offsetWidth;
			document.getElementById('tempCanvas').height=document.getElementById('canvas').height=document.getElementById('fotogrande2').offsetHeight;
			bigCanvas=$('bigCanvas');
			ctxBigCanvas=bigCanvas.getContext("2d");
			bigTempCanvas=$('bigTempCanvas');
			ctxBigTempCanvas=bigTempCanvas.getContext("2d");
			
			
			tempCanvas=document.getElementById('tempCanvas');
			tempCtx = tempCanvas.getContext("2d");
		
			//var im=new Image();
			//im.crossOrigin = "Anonymous";
			//im.onload=function(){
					
				 removeBackground(this, document.getElementById('canvas'),20);
				 removeBackgroundBig(this, document.getElementById('bigCanvas'),20);
				 tempCtx.drawImage(this, 0, 0,640,640,0,0,document.getElementById('tempCanvas').width,document.getElementById('tempCanvas').width);
				 ctxBigTempCanvas.drawImage(this, 0, 0,640,640,0,0,500,500);		 
			//}
			//im.src=$('im').src;
			$("canvas").onmousedown=function (e) {
				handleMouseDown(e);
			};
			
		
			$("canvas").onmousemove=function (e) {
				handleMouseMove(e);
			};
			$("canvas").onmouseup=function (e) {
				handleMouseUp(e);
			};
			$("canvas").onmouseout=function (e) {
				handleMouseOut(e);
			};
			
			$('canvas').addEvent("touchstart", handleTouchStart, false);
			$('canvas').addEvent("touchmove", handleTouchMove, false);
			$('canvas').addEvent("touchend", handleTouchEnd, false);
		}
		
		
		//dataURItoBlob
		
		//var blob = dataURItoBlob(ns.imagen);
		//var urlCreator = window.URL || window.webkitURL;
		//var imageUrl = urlCreator.createObjectURL( blob );
		//$('im').src=imageUrl;
		$('im').src=ns.imagen;
		
	}
	ns.paso=1;
	/*
	function doOnOrientationChange()
	  {
		switch(window.orientation) 
		{  
		  case -90:
		  case 90:
			//alert('landscape');
			$('blocklandscape').style.display='block';
			break; 
		  default:
			//alert('portrait');
			$('blocklandscape').style.display='none';
			break; 
		}
		*/
		/*if(ns.paso==3){paso3();removeBackground(document.getElementById('im'), document.getElementById('canvas'),20);document.getElementById('tolerance').value=20;}*/
	  /*}

  window.addEventListener('orientationchange', doOnOrientationChange);
  */
	onload=function(){
		document.addEventListener('longpress', function(e) {
    			return false;
		});

		document.addEventListener('longclick', function(e) {
				return false;
		});
		//doOnOrientationChange();
	}
	var CajaOffsetX;
	var CajaOffsetY;
	var CajaIsDown = false;
	var AjusteY=0;
	function handleCajaStart(e){
		
		e.preventDefault();
		e.stopPropagation();
		/*
		var pos=getOffset($('sacudir'));
		CajaOffsetX=pos.left;
		CajaOffsetY=pos.top;
		CajaIsDown=true;
		$('sacudir').style.top=0;
		AjusteY=$('sacudir').offsetHeight/2;
		playAudio('sound/chch.mp3',1);
		*/
		chch();
	}
	function handleCajaMove(e){
		if (!CajaIsDown) {
			return;
		}
		e.preventDefault();
		e.stopPropagation();
		var touch = e.targetTouches[0];
		mouseX = (touch.clientX-CajaOffsetX) || 0;
		mouseY = (touch.clientY-CajaOffsetY) || 0;
		$('sacudir').style.left=mouseX+'px';
		$('sacudir').style.top=mouseY-(AjusteY)+'px';
	}
	function handleCajaEnd(e){
		e.preventDefault();
		e.stopPropagation();
		CajaIsDown = false;
		chch();
	}
	function prepareShake(){
		shake.startWatch(chch);
		$('sacudir').addEventListener("touchstart", handleCajaStart, false);
		setTimeout(chch,4000);
		//$('sacudir').addEventListener("touchmove", handleCajaMove, false);
		//$('sacudir').addEventListener("touchend", handleCajaEnd, false);
	}
	function mostrarOcultarSelfies(e){
		e.preventDefault();
		e.stopPropagation();
		var el=$('cajaselfies');
		var fin=$('contentapp').offsetWidth;
		$('innercajaselfies').style.width=fin+'px';
		
		if(parseInt(el.offsetWidth)>50){
			el.style.width=0;
			$('flechafotostodas').style.background='url(images/flecha2.jpg) center center no-repeat';
		}else{
			el.style.width=fin+'px';
			$('flechafotostodas').style.background='url(images/flecha.jpg) center center no-repeat';
		}
	}
	
	
	
	
	function borrar_selfie(img_filename){
		if(confirm('¿Desea eliminar esta imagen?')){
			request(
					'http://servidordeapps.com/proceso2.php',
					function(r){
						 paso8();
						 alert('La imagen ha sido borrada');
					},
					{'proceso':'borrarselfie','foto':img_filename,'user':ns.user}
					
			);
		}
	}
	function descargar(fullPath){
		if(confirm('¿Desea guardar esta imagen en la galería?')){
			var im=new Image();
			im.onload=function(){
				var ctx=document.getElementById('descarga_canvas').getContext('2d');
				ctx.drawImage(this, 0, 0);
				window.canvas2ImagePlugin.saveImageDataToLibrary(
					function(msg){
						//window.open('file:///'+msg, '_blank', 'location=yes');
						alert('La imagen ha sido guardada');
					},
					function(err){
						//alert(err);
					},
					document.getElementById('descarga_canvas')
				);
			};
			im.src=fullPath;
		}
	}
	DR(function(){$('zactflecha').style.width='50px';$('zactflecha').style.height=$('flechafotostodas').offsetHeight+'px';});
	ns.tol=0;
	function handleonchange(){
		if(ns.tol){
			clearTimeout(ns.tol);
		}
	ns.tol=setTimeout(function(){removeBackground(document.getElementById('im'), document.getElementById('canvas'),$('tolerance').value);removeBackgroundBig(document.getElementById('im'),document.getElementById('bigCanvas'),$('tolerance').value);},200);
	}
	function verbases(){
		$('lasbases').style.background='#FFF200';
		$('lasbases').style.width='90%';
		$('lasbases').style.paddingLeft=$('lasbases').style.paddingRight='5%';
		$('lasbases').style.position='absolute';
		$('lasbases').style.zIndex='15000';
		$('lasbases').style.left='0';
		$('lasbases').style.top='0';
		$('lasbases').style.overflow='auto';
		$('lasbases').style.height=(document.documentElement.clientHeight)+'px';
		$('lasbases').style.display='block';
	}
    </script>
  </head>
  <body>
<div id="lasbases"><div style="text-align:center; font-weight:bold; padding-top:50px">BASES Y CONDICIONES ACCIÓN DIGITAL“SELFIE CHICLETS”</div> 
    <br><br>
1. Apple no es sponsor de la app ni de la promoción.<br><br>

2. Ni el concurso ni sus premios son productos de Apple.<br><br>

3. Apple no tiene ninguna relación con el concurso.<br><br>

4. Presentación. Mondelez Uruguay S.A. (en adelante, el “Organizador” o “Mondelez”, indistintamente), con domicilio en Yaguarón 1407 piso 16, organiza una acción digital denominada “Selfie Chiclets” (en adelante, la “Acción”), la cual se llevará a cabo en el territorio de la República Oriental del Uruguay y estará sujeta a las siguientes condiciones (en adelante las “Bases y Condiciones” o las “Bases”, indistintamente). <br><br>

5. Vigencia. La Promoción tendrá vigencia desde el 13 de agosto de 2015 hasta el 30 de septiembre de 2015 inclusive (en adelante, el “Plazo de Vigencia”).<br><br>

6. Productos Participantes y Condiciones de Participación. La participación en la Acción no estará sujeta a la adquisición de ningún producto o la contratación de ningún servicio, por cuanto se trata de una Acción absolutamente gratuita en la cual podrán participar todos los interesados (personas físicas domiciliadas en la República Oriental del Uruguay), que cumplan con los términos y condiciones de estas Bases (en adelante, “Participante/s”).<br><br>

No podrán participar los empleados y/o directivos del Organizador, sus parientes hasta el cuarto grado de consanguinidad y primero de afinidad, ni los empleados de las empresas asociadas y/o controladas, ni los proveedores vinculados a esta Acción digital.<br><br>

7. Mecánica de Participación. Los Participantes deberán acceder al sitio web https://www.facebook.com/ChicletsUruguay, ingresar a las aplicaciones nativas que serán alojadas en Google Play y en ITunes (en adelante, la “App”), y una vez registrados allí (para lo cual deberán completar todos los datos requeridos por el formulario de ingreso: nombre, teléfono y dirección de correo electrónico- en adelante, los “Datos”), deberán subir y/o compartir sus selfies. 
La App consiste en la posibilidad de sacarse una selfie, generar un recorte de cuerpo y fondo y mediante un Chiki- Chiki (shake del dispositivo o clic sobre la pantalla) podrán modificar el fondo de la imagen. 
El Participante puede acceder a la Trivia cuantas veces desee. Sólo si comparte la imagen realizada en sus perfiles de redes sociales estará participando en el sorteo previsto en el punto 5 de estas Bases.<br><br>

8. Sorteo. El sorteo (“Sorteo”) de los premios se hará el día 2 de octubre de 2015, en las Oficinas del Organizador, ante Escribano Público designado al efecto. 
A tales efectos se tendrán en cuenta todos los Participantes que generaron chances de participación conforme a lo términos expuestos en el punto 4 de estas Bases, y se procederá a la selección electrónica al azar, de diez (10) titulares presuntos ganadores (en adelante, “Presunto/s Ganador/es”), y diez (10) suplentes (en adelante, “Suplente/s). Estos últimos, conformarán una lista de prelación eventualmente utilizada por el Organizador para los casos de descalificación o desinterés delos Presuntos Ganadores en cuanto al premio obtenido. <br><br>

9. Premios. Los Premios previstos para la presente Acción (en adelante, “Premio/s”), consisten en diez (10) selfie stick, no incluyendo los mismos ningún otro pago, prestación, bien o servicio distinto de los establecidos anteriormente. El derecho a su asignación es intransferible y no podrán ser canjeados por su valor en dinero u otros bienes. 
Si el Presunto Ganador o Suplente de alguno de los Premios fuese menor de edad, el Premio deberá ser reclamado por y, en su caso, será entregado a alguno de sus padres, tutor o representante legal. 
La entrega de los Premios estará supeditada asimismo a: (i) la comprobación de inexistencia de causales de exclusión de participación en la presente Promoción; (ii) suscripción de constancia de entrega por parte del beneficiario del premio, sea éste Presunto Ganador o Suplente (en adelante, “Beneficiario/s”); y, (iii) suscripción de autorización para uso del derecho de imagen y datos personales de los Presuntos Ganadores conforme los términos y condiciones expuestos en el punto 9de estas Bases.
El incumplimiento de cualquiera de estas condiciones, así como la falta de reclamo de los Premios de la forma y plazo de sesenta (60) establecido en el punto 7 de estas Bases, hará perder automática e irrevocablemente a los Beneficiarios, el derecho a la asignación de los Premios sin derecho a reclamo compensación o indemnización alguna.
Se señala expresamente, que: (i) los Premios no entregados, permanecerán en poder del Organizador; y, (ii) el Organizador no otorga garantía de calidad de los Premios, ni asume las obligaciones de su funcionamiento y condición mecánica atribuibles a los fabricantes, importadores o vendedores, de acuerdo a la normativa vigente.<br><br>

10. Comunicación a los Presuntos Ganadores y Entrega de Premios. Los Presuntos Ganadores de los Premios serán notificados de su carácter de tales el mismo día de la realización del Sorteo, mediante mail a la casilla de correo electrónico o número telefónico consignados al momento de participar en la App. A partir del día siguiente a dicha notificación, los Presuntos Ganadores contarán con un plazo de sesenta (60) días corridos para pasar a retirar sus respectivos Premios por las Oficinas del Organizador, sin perjuicio que deberán confirmar su deseo de hacer uso del Premio vía email dentro de los 15 días hábiles siguientes a dicha notificación.
El mensaje que comunique a los participantes beneficiarios de su calidad de Presuntos Ganadores no implicará la asignación delos mismos, sino que la asignación de éstos estará supeditada a la comprobación del cumplimiento de las presentes Bases.
Los Premios serán entregados en Montevideo, en las Oficinas del Organizador, en tanto que en el Interior, la entrega de los mismos se hará previa coordinación con el beneficiario del mismo.
Se señala expresamente, que en el caso de que el Presunto Ganador se trate de personas menores de edad, a los efectos de la recepción del Premio, deberán asistir acompañados de sus representantes legales.
Vencido el plazo de 60 días corridos o 15 días hábiles (según corresponda), establecido anteriormente sin que el o los Presunto/s Ganador/es pase/n a retirar su/s Premio/s, el Organizador procederá a contactarse con el o los Suplente/s que correspondieran, quienes contarán con un plazo de sesenta (60) días corridos para pasar a retirar su respectivo Premio.<br><br>

11. Comunicación de la Acción. El Organizador difundirá la Acción y sus términos de participación en la aplicación mencionada. Se dispondrá además de un número telefónico gratuito para realizar cualquier tipo de consultas con respecto a la Acción y su mecánica de funcionamiento, a saber: 0800 2350.<br><br>

12. Derecho de Imagen y Datos Personales. Los Participantes, por el mero hecho de su participación en la presente Acción autorizan al Organizador por tiempo razonable (de 1 a 2 años) a difundir o publicar sus datos personales y/o divulgar sus imágenes, voces y/o imágenes con fines publicitarios y/o comerciales, sin derecho a compensación alguna, conforme a las disposiciones de la Ley 18.331. 
Asimismo, los beneficiarios de los Premios, sean éstos Presuntos Ganadores o Suplentes (en adelante, “Beneficiario”) como condición para la asignación de los mismos, autorizará expresamente al Organizador a publicar y difundir con fines comerciales, por un plazo de 1 (un) año, su/s nombre/s e imagen/es, en los medios y formas que el Organizador disponga, sin derecho a compensación alguna conforme a lo establecido en el artículo 21 de la ley 9.739. Dicho derecho de uso incluye, pero no se encuentra limitado a, la reproducción, distribución, transmisión, exposición y exhibición de las Imágenes, ya sea con o sin el nombre del o los ganadores, con fines ilustrativos, institucionales, promocionales, editoriales, artísticos, publicitarios u otros, en los envoltorios de los productos del Organizador, en cualquier publicación institucional, promocional, editorial, artística, publicitaria y con otros fines lícitos del Organizador, en cualquier tipo de presentación, afiches y/o comerciales publicitarios, que fueran publicados y/o anunciados en cualquiera de los medios (sean de difusión o no) actualmente existentes o que se creen de aquí en adelante, incluyendo expresamente Internet y otros medios virtuales, electrónicos o digitales.<br><br>
 
13. Jurisdicción Competente. Para cualquier cuestión judicial que pudiera derivarse de la realización de la Acción, los Participantes y el Organizador se someterán a la jurisdicción de los tribunales nacionales ordinarios con sede en la ciudad de Montevideo.<br><br>

14. Modificación de Bases. El Organizador se reserva el derecho de modificar estas Bases en forma total y/o parcial, cuando las circunstancias no previstas que constituyan caso fortuito o fuerza mayor lo justifiquen. Asimismo, el Plazo de Vigencia y/o cantidad de Premios, podrá ampliarse a instancias del Organizador.<br><br>

15. Interpretación. Ante cualquier discrepancia entre el contenido de las presentes Bases y el contenido de la publicidad gráfica en los puntos de venta, prevalecerá el contenido de las presentes Bases. 
16. Aceptación de las Bases. La participación en la Acción implica la aceptación de estas Bases así como de las decisiones que adopte el Organizador sobre cualquier cuestión no prevista en ellas.<br><br>

17. Exoneración de Responsabilidad. El Organizador no será responsable: (i) por ningún daño o perjuicio, de cualquier tipo que fuere, que pudieren sufrir los Participantes, Presuntos Ganadores, Suplentes y/o terceros, en sus personas o bienes, con motivo de o con relación a su participación en la Acción o con relación a la utilización de los Premios; ni (ii) por fallas en la red telefónica, en la red Internet ni por desperfectos técnicos, errores humanos o acciones deliberadas de terceros que pudieran interrumpir o alterar el normal desarrollo de la Acción.
<div class="botoncontexplicacion">
<div class="btbotonesmaschicos continuar" style="background-repeat:no-repeat;"  onclick="$('lasbases').style.display='none';"></div></div>
</div>
  <div style="height:30px; line-height:30px; width:200px; position:absolute; top:50px; left:50%; margin-left:-100px;  color:#000; font-size:12px; text-align:center; text-decoration:underline" ontouchstart="verbases();">TERMINOS Y CONDICIONES</div>
  
  <div id="offline" style="background:url(images/icon.png) center center no-repeat #FFF200; width:100%; height:100%; position:absolute; left:-2000px;; top:-2000px; z-index:90000"></div>
   <div id="sacudir"></div>
  <div style="width:0; height:0; overflow:hidden; position:absolute; top:-1500px; z-index:1"><canvas id="descarga_canvas" width="500" height="500"></canvas></div>
 <div id="contenedorflecha"> 
 <div  id="flechafotostodas" class="flechafotostodas"></div>
 <div id="zactflecha" ontouchstart="mostrarOcultarSelfies(event);"></div>
 </div>

  <div id="cajaselfies" style="text-align:center;">
    <div id="innercajaselfies" style="text-align:center; height:auto">
    <img src="images/mis_selfie_chiclets.png" width="100%" style="margin-top:8%;">
    <div id="contenedorselfies" style="width:90%; text-align:center; left:50%; margin-left:-45%; position:relative; overflow:auto">
    </div>
  </div></div>
  <div id="contentapp">
  <div id="blocklandscape"><span>Por favor gire el dispositivo</span></div>
  	<div id="contenedorgeneral">
        <div id="cajabasedetodo">
        	<div class="logolanding"></div>
        	<div class="link1"></div>
        	<div class="btcomenzar" onClick="getPage('2.html')"></div>
        </div>
	</div>
  </div>
  </body>
</html>